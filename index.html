<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xhr_dcode</title>
    <link rel="stylesheet"  type="text/css"  href="dcode.css"/>
</head>
<body>
    <fieldset>
        <legend>responseText - dcode</legend>
        <div id="div"></div>
    </fieldset>
    <fieldset>
      <legend>post - dcode</legend>
      <p id="serverresponse">a</p>
  </fieldset>
</body>
<script type="text/javascript">
    const xhr = new XMLHttpRequest();
    console.log('before all readyState:' + xhr.readyState);
    const urljson = 'https://perlov3301.github.io/getxmljson/wikijson.json';
    const urlxml = 'https://perlov3301.github.io/getxmljson/wikixml.xml';
    const urlabelski = 'https://perlov3301.github.io/getxmljson/abelski.xml';
    const urltext = 'https://perlov3301.github.io/getxmljson/dom.txt';
    const urlphp = 'https://perlov3301.github.io/getxmljson/dom.php';
// 0=unsent 1=opened 2=received 3=loading 4=done
  xhr.onreadystatechange = function() {
      console.log("onreadystatechange;readyState=" + xhr.readyState);
      if (xhr.readyState == 4) {
  // status 200=>OK 400, 401, 404=>not found ;500 etc.
      if (xhr.status == 200) {
        console.log("response" + xhr.responseText);
        document.getElementById('div').textContent = xhr.responseText;
        xhr.abort();
        console.log('after aborting of responseText;readyState:' + xhr.readyState);
      }
      if (xhr.status ==404) {
        console.log('File or resource not found');
      }
    }
  };
  console.log('before open;readyState:' + xhr.readyState);
  xhr.open('get', urltext, true);
  console.log('after open&before send; readyState:' + xhr.readyState);
  xhr.send();
  console.log('after send;readyState:' + xhr.readyState);
    /*
  xhr.onload = function () {
    console.log('new onload;before all;readyState:' + xhr.readyState);
    const serverResponse = document.getElementById('serverresponse');
    serverResponse.innerHtml = this.responseText;
  };
  xhr.open("POST", urlphp);
  xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
// request body
  xhr.send("name=alex&message=how are you");
  */
</script>
</html>
